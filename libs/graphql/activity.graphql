query getActivityTypes {
  findManyActivityType(orderBy: { order: asc }) {
    id
    name
    action
    badge
    order
  }
}

query activityUserList($isDeleted: Int) {
  findManyUser(
    where: { deleted: { equals: $isDeleted } }
    orderBy: { full_name: asc }
  ) {
    id
    name: full_name
    avatarURL: image
  }
}

query findManyActivityData(
  $endDate: DateTime
  $startDate: DateTime
  $activityType: [String]
  $status: [String]
  $userId: [Int]
  $search: String
  $skip: Int
  $limit: Int
  $activeColumns: [String]
  $orderValue: OrderType
) {
  findManyActivityData(
    where: {
      endDate: $endDate
      startDate: $startDate
      activityType: $activityType
      status: $status
      userId: $userId
      search: $search
      activeColumns: $activeColumns
      orderValue: $orderValue
    }
    skip: $skip
    take: $limit
  ) {
    retrieveActivityCount {
      reopened
      pending
      working
      awaiting
      done
    }
    count
    activityData {
      id
      dueDate: due_start_date
      dueEndDate: due_end_date
      lead_id
      freeBusy: available
      addTime: created_at
      doneTime: finished_at
      duration
      assigned: AssignedUser {
        id
        full_name
      }
      creator: User {
        id
        full_name
      }
      type: ActivityType {
        id
        name
        badge
      }
      subject
      note
      status
      client: CmContact {
        id: ID
        firstName: Fname
        lastName: Lname
        email: Email
        phone: Phone
        street: MailingStreet
        city: MailingCity
        postal: MailingPostal
        country: MailingCountry
        mobile: Mobile
        createdDate: CreatedDate
        source: MarketingSourceData {
          name
        }
        salutation: Salutation
        gender
        DOB
        status: is_active
        label: CmContactLabel {
          CmLabel {
            id
            name
            color
          }
        }
        clientTotalActivities
      }
      lead: CmLead {
        firstName: Fname
        lastName: Lname
        email: Email
        phone: Phone
        description: Description
        createdDate: CreatedDate
        wonTime: ConvertDate
        owner: User {
          full_name
        }
        leadSource: MarketingSource {
          name
        }
        leadClosedOn: ConvertDate
        leadDoneActivities
        firstActivityTime
        leadLastActivityDate
        leadLastActivityDays
        leadTotalActivities
        leadLostTime
        leadLostReason
        wonBy
        leadStage
      }
    }
  }
}

query findFirstActivityUserState {
  findFirstActivityUserState {
    id
    company_id
    user_id
    columns
    user_filter
    user_group_filter
    custom_filter
  }
}

mutation upsertOneActivityUserState(
 $userId: Int!
 $companyId: Int!
 $columns: String = null
 $userFilterId: Int = null
 $customFilterId: Int = null
 $userGroupFilterId: Int = null
 $update: ActivityUserStateUpdateInput! 
){
  upsertOneActivityUserState(
    where: {
      company_id_user_id: {
        user_id: $userId
        company_id: $companyId
     }
    }
    update: $update
    create: {
     columns: $columns
     user_filter: $userFilterId
     custom_filter: $customFilterId
     user_group_filter: $userGroupFilterId
     User: {
      connect: { id: $userId }
     }
     Company: {
      connect: { id: $companyId }
     }
   }
  ) {
    id
  }
}

query userGroupForActivity {
  userGroup: findManyUserGroup {
    id
    group_name
    _count {
      UserGroupMember
    }
    UserGroupMember {
      User {
        id
        full_name
      }
    }
  }
}

query filterOptionForActivity($userId: Int!) {
  filterOption: findManyActivityUserFilters(where: {
    OR: [
      {user_id: {equals: $userId}},
      {shared: {equals: true}}
    ]
  }) {
    id
    user_id
    User {
      full_name
    }
    name
    data
    columns
    shared
    updated_at
  }
}

mutation deleteActivityUserFilter($id: Int) {
  deleteOneActivityUserFilters(where: {
    id: $id
  }) {
    id
  }
}

query findManyLeads($searchTerm: String) {
  findManyCmLead(
    where: {
      OR: [
        { Fname: { contains: $searchTerm } }
        { Lname: { contains: $searchTerm } }
      ]
    }
    take: 10
  ) {
    id: ID
    Fname
    Lname
  }
}

query findManyContacts($searchTerm: String) {
  findManyCmContact(
    where: {
      OR: [
        { Fname: { contains: $searchTerm } }
        { Lname: { contains: $searchTerm } }
      ]
    }
    take: 10
  ) {
    id: ID
    Fname
    Lname
  }
}

mutation createActivityFilter(
  $data: String,
  $columns: String,
  $name: String!,
  $shared: Boolean!
) {
  createOneActivityUserFilters(data: {
    data: $data
    columns: $columns
    name: $name
    shared: $shared
    User: {}
    Company: {}
  }) {
    id
    user_id
  }
}

mutation updateActivityFilter(
  $id: Int!,
  $data: String,
  $columns: String,
  $name: String!,
  $shared: Boolean!
) {
  updateOneActivityUserFilters(
    where: {
      id: $id
    }
    data: {
      data: {set: $data}
      columns: {set: $columns}
      name: {set: $name}
      shared: {set: $shared}
    }
  ) {
    id
    user_id
  }
}

query findContactName($contactID: Int!) {
  findFirstCmContact(where: { ID: { equals: $contactID } }) {
    id: ID
    Fname
    Lname
  }
}

query findLeadName($leadID: Int!) {
  findFirstCmLead(where: { ID: { equals: $leadID } }) {
    id: ID
    Fname
    Lname
  }
}