query getKanbanLeads(
  $limit: Int = 10
  $skip: Int = 0
  $company_id: Int
  $pipeline_id: Int
  $pipeline_stage_id: Int
) {
  findManyCmLead(
    take: $limit
    skip: $skip
    where: {
      company_id: { equals: $company_id }
      PipelineStage: {
        id: { equals: $pipeline_stage_id }
        pipeline_id: { equals: $pipeline_id }
      }
    }
  ) {
    lead_id: ID
    Name: Fname
    Avatar
    lastName: Lname
    OwnerID
    ContactID
    Contact {
      Fname
      Lname
      Avatar
    }
    Title
    status: EnumStatus
    LastUpdated
    User {
      id
      username
      full_name
      image
    }
    Activity {
      id
      note
      subject
      due_start_date
      due_end_date
      created_by
      status
    }
    LeadStatus
    PipelineStage {
      id
      name
      stage_order
      note
      Pipeline {
        id
        name
        status
        description
      }
    }
  }
}

query getLeadPipelines {
  findManyPipeline(where: { reference: { equals: "leads" } }) {
    name
    description
    status
    note
    PipelineStage {
      id
      name
      stage_order
    }
  }
}

query getCmLeadCount($company_id: Int, $pipeline_id: Int) {
  findManyCmLeadCount(
    where: {
      PipelineStage: {
        pipeline_id: { equals: $pipeline_id }
        company_id: { equals: $company_id }
      }
    }
  )
}
